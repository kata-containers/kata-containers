name: CI | Build kata-static tarball for amd64
on:
  workflow_call:
    inputs:
      tarball-suffix:
        required: false
        type: string

jobs:
  create-kata-tarball:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: create fake tarball
        run: |
          cd ..
          tar cfJ kata-static.tar.xz kata-containers
          mv kata-static.tar.xz kata-containers
      - name: store-artifacts
        uses: actions/upload-artifact@v3
        with:
          name: kata-static-tarball-amd64${{ inputs.tarball-suffix }}
          path: kata-static.tar.xz
          retention-days: 1
          if-no-files-found: error
