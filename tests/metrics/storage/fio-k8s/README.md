# FIO test in Kubernetes

This is an automation to run `fio` with Kubernetes.

## Requirements:
- Kubernetes cluster running
- Kata configured as `runtimeclass`.

The test is structured as follow:

- [fio-test]:
Program wrapper to launch `fio` in a K8s pod. 

- [pkg]:
Library code that could be used for more `fio` automation.

- [configs]:
Configuration files used by [fio-test]

- [DAX-compare-test]:
Script to run [fio-test] to generate `fio` data for Kata with/without
`virtio-fs DAX` and K8s bare-metal runtime(`runc`).

- [report]
Jupyter Notebook to create reports for data generated by [DAX-compare-test]

## Top-level Makefile targets

- `build`: Build `fio` metrics
- `test`: quick test, used to verify changes in [fio-test].
- `run`: Run `fio` metrics and generate reports.
- `test-report-interactive`: Run python notebook in `localhost:8888`, useful to edit the report.
- `test-report`: Generate report from data generated by `make test`

[fio-test]:cmd/fiotest
[configs]:configs
[pkg]:pkg
[report]:scripts/dax-compare-test/report
[DAX-compare-test]:scripts/dax-compare-test/README.md
