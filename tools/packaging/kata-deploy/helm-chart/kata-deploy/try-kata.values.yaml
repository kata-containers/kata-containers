# Example values file to enable all available Kata Containers shims
# This is useful for trying out all the different runtime options available.
#
# Usage:
#   helm install kata-deploy oci://ghcr.io/kata-containers/kata-deploy-charts/kata-deploy \
#     --version VERSION \
#     -f try-kata.values.yaml

debug: false

snapshotter:
  setup: []  # ["nydus", "erofs"] or []

# Enable all available shims
shims:
  clh:
    enabled: true
    supportedArches:
      - amd64
      - arm64
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: ""

  cloud-hypervisor:
    enabled: true
    supportedArches:
      - amd64
      - arm64
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: ""

  dragonball:
    enabled: true
    supportedArches:
      - amd64
      - arm64
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: ""

  fc:
    enabled: true
    supportedArches:
      - amd64
      - arm64
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: "devmapper" # requires pre-configuration on the user side

  qemu:
    enabled: true
    supportedArches:
      - amd64
      - arm64
      - s390x
      - ppc64le
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: ""

  qemu-runtime-rs:
    enabled: true
    supportedArches:
      - amd64
      - s390x
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: ""

  qemu-nvidia-gpu:
    enabled: true
    supportedArches:
      - amd64
      - arm64
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: ""

  qemu-nvidia-gpu-snp:
    enabled: true
    supportedArches:
      - amd64
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: ""
      forceGuestPull: true
    crio:
      guestPull: true
    agent:
      httpsProxy: ""
      noProxy: ""

  qemu-nvidia-gpu-tdx:
    enabled: true
    supportedArches:
      - amd64
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: ""
      forceGuestPull: true
    crio:
      guestPull: true
    agent:
      httpsProxy: ""
      noProxy: ""

  qemu-snp:
    enabled: true
    supportedArches:
      - amd64
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: nydus
      forceGuestPull: false
    crio:
      guestPull: true
    agent:
      httpsProxy: ""
      noProxy: ""

  qemu-tdx:
    enabled: true
    supportedArches:
      - amd64
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: nydus
      forceGuestPull: false
    crio:
      guestPull: true
    agent:
      httpsProxy: ""
      noProxy: ""

  qemu-se:
    enabled: true
    supportedArches:
      - s390x
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: nydus
      forceGuestPull: false
    crio:
      guestPull: true
    agent:
      httpsProxy: ""
      noProxy: ""

  qemu-se-runtime-rs:
    enabled: true
    supportedArches:
      - s390x
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: nydus
      forceGuestPull: false
    crio:
      guestPull: true
    agent:
      httpsProxy: ""
      noProxy: ""

  qemu-cca:
    enabled: true
    supportedArches:
      - arm64
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: nydus
      forceGuestPull: false
    crio:
      guestPull: true
    agent:
      httpsProxy: ""
      noProxy: ""

  qemu-coco-dev:
    enabled: true
    supportedArches:
      - amd64
      - s390x
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: nydus
      forceGuestPull: false
    crio:
      guestPull: true
    agent:
      httpsProxy: ""
      noProxy: ""

  qemu-coco-dev-runtime-rs:
    enabled: true
    supportedArches:
      - amd64
      - s390x
    allowedHypervisorAnnotations: []
    containerd:
      snapshotter: nydus
      forceGuestPull: false
    crio:
      guestPull: true
    agent:
      httpsProxy: ""
      noProxy: ""

# Default shim per architecture
defaultShim:
  amd64: qemu
  arm64: qemu
  s390x: qemu
  ppc64le: qemu

runtimeClasses:
  enabled: true
  createDefault: false
  defaultName: "kata"

